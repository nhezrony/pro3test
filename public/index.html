<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Home Page</title>
    <!--Import Google Icon Font-->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/css/materialize.min.css">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--Import local css *not working*-->
    <link rel="stylesheet" href="css/index.css">
</head>

<body>

    <!-- <video autoplay muted loop id="bgVideo">
        <source src="images/StockMarketStockVideo.webm" type="video/webm">
    </video> -->


    <nav>
        <div class="nav-wrapper blue darken-3">
            <a href="#" class="brand-logo right">
            </a>
            <ul id="nav-mobile" class="left hide-on-med-and-down">
                <li>
                    <a href="/">Home</a>
                </li>
                <li>
                    <a href="/profile">My Profile</a>
                </li>
                <li>
                    <a href="/register">Register</a>
                </li>
            </ul>
        </div>
    </nav>


    <div class="container" id="bgSheet">


        <div class="row center-align">
            <div class="col s12">
                <div class="row">
                    <div class="col s4"></div>
                    <div class="input-field col s4 center">
                        <i class="material-icons prefix"></i>
                        <input type="text" id="autocomplete-input" class="autocomplete">
                        <label for="autocomplete-input">Company</label>
                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col s12">
                <div class="row">
                    <table>
                        <tbody>
                            <tr>
                                <td>
                                    <a href="/symbol/GOOG" class="btn btn-flat transparent" id="GOOG">
                                        <img class="responsive-img" src="images/Alphabet.png">
                                    </a>
                                </td>
                                <td>
                                    <a href="/symbol/AMZN" class="btn btn-flat transparent" id="TSLA">
                                        <img class="responsive-img" src="assets/images/amazon.png">
                                    </a>
                                </td>
                                <td>
                                    <a href="/symbol/FB" class="btn btn-flat transparent" id="FB">
                                        <img class="responsive-img" src="assets/images/Facebook.png">
                                    </a>
                                </td>
                                <td>
                                    <a href="/symbol/CRM" class="btn btn-flat transparent" id="CRM">
                                        <img class="responsive-img" src="assets/images/Salesforce.png">
                                    </a>
                                </td>
                                <td>
                                    <a href="/symbol/TSLA" class="btn btn-flat transparent" id="TSLA">
                                        <img class="responsive-img" src="assets/images/tesla.png">
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <a href="/symbol/NFLX" class="btn btn-flat transparent" id="NFLX">
                                        <img class="responsive-img" src="assets/images/Netflix.png">
                                    </a>
                                </td>
                                <td>
                                    <a href="/symbol/TWTR" class="btn btn-flat transparent" id="TWTR">
                                        <img class="responsive-img" src="assets/images/twitter.png">
                                    </a>
                                </td>
                                <td>
                                    <a href="/symbol/SPOT" class="btn btn-flat transparent" id="SPOT">
                                        <img class="responsive-img" src="assets/images/Spotify.png">
                                    </a>
                                </td>
                                <td>
                                    <a href="/symbol/TEVA" class="btn btn-flat transparent" id="TEVA">
                                        <img class="responsive-img" src="assets/images/Teva.png">
                                    </a>
                                </td>
                                <td>
                                    <a href="/symbol/XLNX" class="btn btn-flat transparent" id="XLNX">
                                        <img class="responsive-img" src="assets/images/Thermo_Fisher_Scientific.png">
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <a href="/symbol/NVDA" class="btn btn-flat transparent" id="NVDA">
                                        <img class="responsive-img" src="assets/images/Nvidia.png">
                                    </a>
                                </td>
                                <td>
                                    <a href="/symbol/CSCO" class="btn btn-flat transparent" id="CSCO">
                                        <img class="responsive-img" src="assets/images/Cisco.png">
                                    </a>
                                </td>
                                <td>
                                    <a href="/symbol/INTC" class="btn btn-flat transparent" id="INTC">
                                        <img class="responsive-img" src="assets/images/Intel.png">
                                    </a>
                                </td>
                                <td>
                                    <a href="/symbol/AVGO" class="btn btn-flat transparent" id="AVGO">
                                        <img class="responsive-img" src="assets/images/Broadcom.png">
                                    </a>
                                </td>
                                <td>
                                    <a href="/symbol/XLNX" class="btn btn-flat transparent" id="XLNX">
                                        <img class="responsive-img" src="assets/images/Xilinx.png">
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="row center-align">
            <div class="col s12" id="mainGraphUrl"></div>
        </div>
        <div class="row center-align">
            <div id="minGraphUrl"></div>
            <div id="maxGraphUrl"></div>
        </div>
    </div>

    <!-- <img src="images/HideTheMark.png" alt="hide" id="blackTape"> -->

    <!-- Compiled and minified JavaScript -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/js/materialize.min.js"></script>
    <script>
        $(document).ready(function () {
            $('input.autocomplete').autocomplete({
                data: {
                    "PIH | 1347 Property Insurance Holdings, Inc.": null,
                    "PIHPP | 1347 Property Insurance Holdings, Inc.": null,
                    "TURN | 180 Degree Capital Corp.": null,
                    "FLWS | 1-800 FLOWERS.COM, Inc.": null,
                    "FCCY | 1st Constitution Bancorp (NJ)": null,
                    "SRCE | 1st Source Corporation": null,
                },
                onAutocomplete: function (displayResults) {
                    let symbol = $(this).text().split(/^(.*?) \|/)[1]
                    getGraphs(symbol)
                },
                minlength: 1,
                limit: 50,
                scrollLength: 2,

            });
        });

        $('.btn-flat').on('click', function () {
            getGraphs(this.id)
        })

        function getGraphs(symbol) {
            $.post(`/symbol/${symbol}`, symbol, (data) => {
                $('#mainGraphUrl').append(data.mainGraphUrl)
                $('#minGraphUrl').append(data.minGraphUrl)
                $('#minGraphUrl').append(data.maxGraphUrl)
            })
        }
    </script>
</body>

</html>